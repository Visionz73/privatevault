<!DOCTYPE html>
<html>
<head>
    <title>Second Brain Test - PrivateVault</title>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #2d1b69 0%, #11101d 30%, #1a0909 100%);
            color: white;
            padding: 2rem;
        }
        .test-container {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem auto;
            max-width: 800px;
        }
        .test-item {
            padding: 1rem;
            margin: 0.5rem 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 0.5rem;
        }
        .success { border-left: 4px solid #10b981; }
        .error { border-left: 4px solid #ef4444; }
        .warning { border-left: 4px solid #f59e0b; }
        .test-btn {
            background: rgba(59, 130, 246, 0.3);
            border: 1px solid rgba(59, 130, 246, 0.5);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            cursor: pointer;
            margin: 0.5rem;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s ease;
        }
        .test-btn:hover {
            background: rgba(59, 130, 246, 0.5);
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>🧠 Second Brain Graph View Test</h1>
        <p>Test der neuen Second Brain Funktionalität im PrivateVault Dashboard.</p>
        
        <div id="test-results">
            <div class="test-item warning">
                <strong>Teste JavaScript Funktionen...</strong>
                <p>Überprüfe ob alle Funktionen korrekt definiert sind.</p>
            </div>
        </div>
        
        <div style="text-align: center; margin: 2rem 0;">
            <a href="http://localhost/dashboard.php" class="test-btn" target="_blank">
                🚀 Dashboard öffnen
            </a>
            <button onclick="runTests()" class="test-btn">
                🧪 Tests ausführen
            </button>
        </div>
        
        <div class="test-container">
            <h2>🎯 Second Brain Features</h2>
            <ul>
                <li>✅ Interaktive Graph-Visualisierung mit Nodes und Verbindungen</li>
                <li>✅ Drag & Drop für Node-Repositionierung</li>
                <li>✅ Color-Coding nach Notiz-Typen</li>
                <li>✅ Tooltips mit Schnellvorschau</li>
                <li>✅ Graph-Steuerung (Center, Layout, Zoom)</li>
                <li>✅ Fallback Sample-Daten für Tests</li>
                <li>✅ View-Switching (Grid ↔ Graph ↔ List)</li>
                <li>✅ Connection Highlighting</li>
                <li>✅ Stats Panel mit Metriken</li>
            </ul>
        </div>
        
        <div class="test-container">
            <h2>🐛 Behobene Probleme</h2>
            <ul>
                <li>✅ JavaScript Syntax Error (Unexpected token ':')</li>
                <li>✅ ReferenceError: toggleNotesApp is not defined</li>
                <li>✅ ReferenceError: openNoteEditor is not defined</li>
                <li>✅ Doppelte Funktionsdefinitionen entfernt</li>
                <li>✅ JSON Syntax Fehler in saveNodePosition behoben</li>
                <li>✅ Gradient Object Syntax korrigiert</li>
            </ul>
        </div>
    </div>

    <script>
        function runTests() {
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML = '<div class="test-item warning"><strong>Führe Tests aus...</strong></div>';
            
            let results = [];
            
            // Test 1: Basis JavaScript
            try {
                console.log('Test 1: JavaScript Engine');
                results.push({
                    type: 'success',
                    title: 'JavaScript Engine',
                    message: 'JavaScript läuft korrekt'
                });
            } catch (e) {
                results.push({
                    type: 'error',
                    title: 'JavaScript Engine',
                    message: 'JavaScript Fehler: ' + e.message
                });
            }
            
            // Test 2: Local Storage
            try {
                localStorage.setItem('test', 'value');
                localStorage.removeItem('test');
                results.push({
                    type: 'success',
                    title: 'Local Storage',
                    message: 'Local Storage funktioniert'
                });
            } catch (e) {
                results.push({
                    type: 'error',
                    title: 'Local Storage',
                    message: 'Local Storage Fehler: ' + e.message
                });
            }
            
            // Test 3: Fetch API
            if (typeof fetch === 'function') {
                results.push({
                    type: 'success',
                    title: 'Fetch API',
                    message: 'Fetch API ist verfügbar'
                });
            } else {
                results.push({
                    type: 'error',
                    title: 'Fetch API',
                    message: 'Fetch API nicht verfügbar'
                });
            }
            
            // Test 4: SVG Support
            if (document.createElementNS) {
                results.push({
                    type: 'success',
                    title: 'SVG Support',
                    message: 'SVG für Graph-Verbindungen unterstützt'
                });
            } else {
                results.push({
                    type: 'error',
                    title: 'SVG Support',
                    message: 'SVG nicht unterstützt'
                });
            }
            
            // Display results
            resultsDiv.innerHTML = '';
            results.forEach(result => {
                resultsDiv.innerHTML += `
                    <div class="test-item ${result.type}">
                        <strong>${result.title}</strong>
                        <p>${result.message}</p>
                    </div>
                `;
            });
            
            resultsDiv.innerHTML += `
                <div class="test-item success">
                    <strong>Tests abgeschlossen!</strong>
                    <p>Öffne das Dashboard und teste die Second Brain Graph View.</p>
                </div>
            `;
        }
        
        // Auto-run tests on load
        window.addEventListener('load', runTests);
    </script>
</body>
</html>
